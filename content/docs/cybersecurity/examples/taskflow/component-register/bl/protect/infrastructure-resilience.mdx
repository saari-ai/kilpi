---
title: "PR.IR: Technology Infrastructure Resilience"
description: Billing Portal example for technology infrastructure resilience
---

For methodology guidance, see [PR.IR: Technology Infrastructure Resilience](/docs/cybersecurity/functions/protect/infrastructure-resilience).

---

### PR.IR-01: Network protection

| Network segment | Contains | Inbound allowed from | Outbound allowed to | Enforcement |
|---|---|---|---|---|
| Public subnet | Load balancer | Internet (HTTPS/443 only) | Private subnet (application port) | Security group + NACL |
| Private subnet (application) | Billing API (EC2/ECS) | Load balancer only | PostgreSQL, Stripe (HTTPS) | Security group |
| Private subnet (data) | Billing database (PostgreSQL on RDS) | Application subnet only | None (no outbound) | Security group + RDS network config |

| Control | Level | Rule | Purpose |
|---|---|---|---|
| PostgreSQL VPC binding | Network | RDS security group allows connections only from billing application subnet CIDR | Prevents direct database access from outside the billing application |
| Load balancer TLS termination | Application | HTTPS only, TLS 1.2 minimum, HTTP redirects to HTTPS | Ensures all client communication is encrypted |
| Stripe API egress restriction | Network | Outbound to Stripe API endpoints only (api.stripe.com) from application subnet | Limits external API exposure to known payment provider |

---

### PR.IR-02: Environmental protection

The Billing Portal runs entirely on AWS managed infrastructure. Environmental protections (power, cooling, fire suppression, physical security) are managed by AWS. AWS data centers maintain SOC 2, ISO 27001, and other certifications covering environmental controls.

---

### PR.IR-03: Resilience mechanisms

| Mechanism | Where applied | Configuration | Failure behaviour |
|---|---|---|---|
| Multi-AZ deployment | Billing database (PostgreSQL on RDS) | RDS Multi-AZ with automatic failover | Standby promoted automatically. Downtime target under 60 seconds. |
| Auto-scaling | Billing API (ECS/EC2) | Min 2, max 6 instances. Scale at 70% CPU. | New instances launched automatically. Load balancer routes traffic. |
| Health checks | All billing services | Load balancer health check every 30 seconds | Unhealthy instances removed from rotation within 60 seconds. |
| Stripe failover handling | Billing API to Stripe | Retry with exponential backoff, circuit opens after 5 consecutive failures | Graceful degradation: payment operations queued for retry, customer notified of temporary delay. |

---

### PR.IR-04: Capacity management

| Resource | Monitoring | Alert threshold | Scaling approach | Max limit |
|---|---|---|---|---|
| Billing API CPU | CloudWatch metrics | Warning: 60%. Critical: 80%. | Auto-scaling adds instances | 6 instances |
| Billing API memory | CloudWatch metrics | Warning: 70%. Critical: 85%. | Auto-scaling adds instances | 6 instances |
| Billing DB connections | RDS metrics | Warning: 70% of max_connections. Critical: 85%. | Increase instance size or add read replicas | RDS instance class limit |
| Billing DB storage | RDS metrics | Warning: 80% of allocated storage. Critical: 90%. | Auto-scaling storage enabled | 500 GB |

---
